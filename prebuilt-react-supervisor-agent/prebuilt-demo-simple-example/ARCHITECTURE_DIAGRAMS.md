# Prebuilt vs Manual Supervisor - Architecture Diagrams

This document provides comprehensive visual explanations comparing the **prebuilt** (`create_supervisor`) and **manual** approaches to building supervisor multi-agent systems.

---

## 1. High-Level Architecture Comparison

```mermaid
graph TB
    subgraph "Prebuilt Approach (80 lines)"
        U1[👤 User Request]
        PS[🎯 Prebuilt Supervisor<br/>Auto-generated]
        FA1[✈️ Flight Agent]
        HA1[🏨 Hotel Agent]
        
        U1 --> PS
        PS -->|Auto-routes| FA1
        PS -->|Auto-routes| HA1
        FA1 -->|Auto-returns| PS
        HA1 -->|Auto-returns| PS
        PS -->|Response| U1
    end
    
    subgraph "Manual Approach (200 lines)"
        U2[👤 User Request]
        MS[🎯 Manual Supervisor<br/>Custom implementation]
        Route[🔀 Custom Routing]
        FA2[✈️ Flight Node<br/>Wrapper]
        HA2[🏨 Hotel Node<br/>Wrapper]
        
        U2 --> MS
        MS --> Route
        Route -->|Manual logic| FA2
        Route -->|Manual logic| HA2
        FA2 -->|Manual edge| MS
        HA2 -->|Manual edge| MS
        MS -->|Response| U2
    end
    
    style PS fill:#50C878,color:#fff
    style MS fill:#FFB84D,color:#000
```

---

## 2. Code Complexity Comparison

```mermaid
graph LR
    subgraph "Prebuilt: 3 Steps"
        P1[1. Create Agents<br/>with names] --> P2[2. Call create_supervisor]
        P2 --> P3[3. Done!]
    end
    
    subgraph "Manual: 8 Steps"
        M1[1. Define State] --> M2[2. Create Agents]
        M2 --> M3[3. Wrap Agents]
        M3 --> M4[4. Supervisor Node]
        M4 --> M5[5. Routing Function]
        M5 --> M6[6. Build Graph]
        M6 --> M7[7. Add Edges]
        M7 --> M8[8. Compile]
    end
    
    style P2 fill:#50C878,color:#fff
    style M4 fill:#E74C3C,color:#fff
```

---

## 3. Prebuilt Supervisor Flow

```mermaid
sequenceDiagram
    participant U as User
    participant PS as Prebuilt Supervisor
    participant FA as Flight Agent
    participant HA as Hotel Agent
    
    U->>PS: "Book flight & hotel"
    PS->>FA: Auto-route to flight
    FA->>FA: Execute booking
    FA->>PS: Return result
    PS->>HA: Auto-route to hotel
    HA->>HA: Execute booking
    HA->>PS: Return result
    PS->>U: "All bookings complete"
```

---

## 4. Manual Supervisor Flow

```mermaid
sequenceDiagram
    participant U as User
    participant MS as Manual Supervisor
    participant RF as Routing Function
    participant FN as Flight Node
    participant HN as Hotel Node
    
    U->>MS: "Book flight & hotel"
    MS->>MS: Parse response manually
    MS->>MS: Set next_agent = "flight"
    MS->>RF: Check routing
    RF->>FN: Route to flight node
    FN->>FN: Wrapper invokes agent
    FN->>MS: Return messages
    MS->>MS: Parse response manually
    MS->>MS: Set next_agent = "hotel"
    MS->>RF: Check routing
    RF->>HN: Route to hotel node
    HN->>HN: Wrapper invokes agent
    HN->>MS: Return messages
    MS->>U: "All bookings complete"
```

---

## 5. State Management Comparison

```mermaid
classDiagram
    class PrebuiltState {
        <<Auto-generated>>
        +List messages
        +str next_agent
        ✅ Created automatically
    }
    
    class ManualState {
        <<Custom TypedDict>>
        +Annotated messages
        +Literal next_agent
        ❌ Must define manually
    }
    
    note for PrebuiltState "create_supervisor handles all setup"
    note for ManualState "You must define everything"
```

---

## 6. What create_supervisor Does Automatically

```mermaid
mindmap
    root((create_supervisor))
        State Management
            Auto-generate schema
            Add messages field
            Add next_agent field
            Configure reducers
        Supervisor Node
            Create function
            Write routing prompt
            LLM invocation
            Response parsing
        Graph Construction
            Create StateGraph
            Add nodes
            Configure edges
            START and END
        Agent Integration
            Wrap agents
            Extract names
            Handle messages
            Manage state
```

---

## 7. Lines of Code Breakdown

```mermaid
pie title Code Distribution
    "Prebuilt Total" : 80
    "Manual: State Schema" : 20
    "Manual: Node Wrappers" : 30
    "Manual: Supervisor Logic" : 50
    "Manual: Routing Function" : 30
    "Manual: Graph Building" : 70
```

**Total:** Prebuilt ~80 lines vs Manual ~200 lines

---

## 8. Feature Comparison Matrix

| Feature | Prebuilt | Manual |
|---------|----------|--------|
| State Schema | ✅ Auto | ❌ Manual |
| Supervisor Node | ✅ Auto | ❌ Manual |
| Routing Logic | ✅ Auto | ❌ Manual |
| Graph Construction | ✅ Auto | ❌ Manual |
| Agent Wrapping | ✅ Auto | ❌ Manual |
| Customization | ⚠️ Limited | ✅ Full |
| Learning Curve | ✅ Easy | ❌ Steep |
| Development Time | ⚡ 15 min | 🐌 90 min |

---

## 9. Use Case Decision Tree

```mermaid
flowchart TD
    Start{Need Supervisor?}
    Start -->|Yes| Q1{Need Custom<br/>State?}
    Q1 -->|No| Q2{Need Custom<br/>Routing?}
    Q1 -->|Yes| Manual[Use Manual]
    Q2 -->|No| Prebuilt[Use Prebuilt]
    Q2 -->|Yes| Manual2[Use Manual]
    
    style Prebuilt fill:#50C878,color:#fff
    style Manual fill:#FFB84D,color:#000
    style Manual2 fill:#FFB84D,color:#000
```

---

## 10. Time Investment Comparison

```mermaid
timeline
    title Development Time
    
    section Prebuilt
        0-5 min : Define tools
        5-10 min : Create agents
        10-12 min : Call create_supervisor
        12-15 min : Test
        Result : ✅ Done in 15 minutes
    
    section Manual
        0-10 min : Define tools
        10-20 min : Define state
        20-30 min : Create agents
        30-45 min : Write wrappers
        45-60 min : Supervisor logic
        60-75 min : Routing function
        75-90 min : Build graph
        Result : ✅ Done in 90 minutes
```

**Time Savings:** Prebuilt is **6x faster**!

---

## Key Concepts Summary

### Prebuilt Approach
- ⚡ **Fast**: 15 minutes to working system
- 📝 **Simple**: Just 80 lines of code
- ✅ **Reliable**: Battle-tested implementation
- 🚀 **Production-ready**: Best practices built-in
- ⚠️ **Limited customization**: Fixed patterns

### Manual Approach
- 🎯 **Full control**: Customize everything
- 🔧 **Flexible**: Any graph structure
- 💡 **Learning**: Understand internals
- 🐌 **Slower**: 90 minutes to build
- 📝 **Complex**: 200+ lines of code

---

## When to Use Each

### Use Prebuilt When:
- ✅ Quick prototypes needed
- ✅ Standard supervisor pattern sufficient
- ✅ Production apps with best practices
- ✅ Team projects (easier to understand)

### Use Manual When:
- ✅ Custom state fields needed
- ✅ Special routing logic required
- ✅ Learning LangGraph internals
- ✅ Advanced features (persistence, etc.)

---

**Recommendation:** Start with prebuilt for 90% of use cases. Only go manual when you need custom features.

**Built with LangGraph v1** 🦜🔗
